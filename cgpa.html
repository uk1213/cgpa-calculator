<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>CGPA Calculator</title>
  </head>
  <body>
    <h1 style="color:violet">Calculate your CGPA in an instant</h1>
    <br>
    <br>
    <form id="frm1" action="index.html" method="post">
      <input id="name1" type="text" name="Name" placeholder="Emter Name">
<br>
      <input type="text" id="sem" name="Semester" placeholder="Enter Semester No.">
      <br>
      <input type="text" id="n_c" name="No. of Courses" placeholder="No of Courses"><br>
      <button type="button" onclick="add_inputs()" name="button">Submit</button>
    </form>
    <p id="pa"></p>
    <p id="test"></p>
    <p id="test1"></p><br><br><hr>
    <p id="tot"></p>
    <p id="tet"></p>
    <p id="cg"></p>

    </div>
    <script type="text/javascript">
    function add_inputs(){
      var f=document.getElementById("pa");
      var elem, elem1,elem2,i;
      var n_c=document.getElementById("n_c").value;
      //f.innerHTML="hey";
      for(i=1;i<=n_c;i++){
        d=document.createElement("div");
        br=document.createElement("br");
        srn=document.createTextNode("Course "+i+". ");
        f.appendChild(d);
        f.appendChild(br);
        elem = document.createElement("input");
        elem.type="text";
        elem.placeholder="Enter name of course";
        elem.name="Name of course";
        elem.id="co"+i;
        elem1 = document.createElement("input");
        elem1.type="text";
        elem1.placeholder="Enter number of credits";
        elem1.name="Number of Credits";
        elem1.id="credits"+i;
        elem2=document.createElement("input");
        elem2.type="text";
        elem2.placeholder="Enter marks out of 100";
        elem2.name="Score in the course";
        elem2.id="score"+i;
        d.appendChild(srn);
        d.appendChild(elem);
        d.appendChild(elem1);
        d.appendChild(elem2);
        }
      var b=document.createElement("BUTTON");
      b.addEventListener("click",calculate);
      var t=document.createTextNode("Calculate CGPA");
      b.appendChild(t);
      f.appendChild(b);

    }

    function to_pointer(m){
      var p;
      if (m>=91){
        p=10;
              }
      else if (m>=81 && m<=90) {
        p=9;
              }
      else if (m>=71 && m<=80) {
        p=8;
      }
      else if(m>=61 && m<=70){
        p=7;
      }
      else if(m>=51 && m<=60){
        p=6;
      }
      else if(m>=41 && m<=50){
        p=5;
      }
      else if(m>=31 && m<=40){
        p=4;
      }
      else if(m>=21 && m<=30){
        p=3;
      }
      else if (m>=11 && m<=20) {
        p=2;
      }
      else{
        p=1;
      }
      return p;
    }


    function calculate(){
      // Getting the variables
      //document.getElementById("test").innerHTML="control in function";
      var name, sem_no, n_c,i,tot,t_c;
      var pointers=[]
      name=document.getElementById("name1").value;
      //document.getElementById("test1").innerHTML=name;
      sem_no=document.getElementById("sem").value;
      //document.getElementById("test1").innerHTML=sem_no;
      n_c=document.getElementById("n_c").value;
      //document.getElementById("test1").innerHTML=n_c;
      var course_n=[];
      var course_c=[];
      var course_m=[];
      //document.getElementById("test1").innerHTML="DONE";
      for (i=0;i<n_c;i++)
      {
        course_n[i]=document.getElementById("co"+(i+1)).value;
        course_c[i]=document.getElementById("credits"+(i+1)).value;
        course_m[i]=document.getElementById("score"+(i+1)).value;
      }

      for (i=0;i<n_c;i++){
        pointers[i]=to_pointer(course_m[i]);
      }
      tot=0;
      t_c=0;

      for (i=0;i<n_c;i++){
        course_c[i]=parseInt(course_c[i]);
        tot=tot+(pointers[i]*course_c[i]);
        t_c=t_c+course_c[i];
      }
      var cgpa=tot/t_c;


      document.getElementById("cg").innerHTML="Your CGPA is "+cgpa;


    }
    </script>
  </body>
</html>
